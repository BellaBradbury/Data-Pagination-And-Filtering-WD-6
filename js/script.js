const searchCot=document.getElementsByTagName("header")[0],listCot=document.getElementById("student-list"),pageCot=document.getElementById("pagination"),itmCount=9;let searchMatches=[];const searchBar=`<label for="search" id="student-search" aria-label="Search bar"><input id="search" placeholder="Search by name..." aria-label="Input search here"><button type="button" id='search-btn' aria-label="Submit search"><img src="img/icn-search.svg" alt="Magnifying glass icon" aria-hidden="true"></button><button type="button" id='clear-btn' aria-label="Clear search">X</button></label>`;function noResults(e){let t=`<section id="no-results"><h3>THERE ARE NO RESULTS FOR <strong>${e}</strong></h3><p>Please try again!</p></section>`;return t}function studentHTML(e){let t=`${e.name.first} ${e.name.last}`;return`<li class="student-item sf"><div class="student-details"><img class="avatar" src="${e.picture.large}" alt="Profile picture of ${t}"><h3>${t}</h3><p class="email" aria-label="Email address">${e.email}</p></div><div class="joined-details"><p class="date">Joined ${e.registered.date}</p></div></li>`}const emptyStudent='<li class="student-item sb"></li>';function paginationHTML(e){return`<li><button type="button" class="page-btn" aria-label="Page ${e}">${e}</button></li>`}function showPage(e,t){listCot.innerHTML="";let a=9*t-9,n=9*t;for(let s=a;s<n;s++){let i=e[s];i?listCot.insertAdjacentHTML("beforeend",studentHTML(i)):listCot.insertAdjacentHTML("beforeend",'<li class="student-item sb"></li>')}}function addPagination(e){pageCot.innerHTML="";let t=Math.ceil(e.length/9);if(t>1)for(let a=1;a<=t;a++)pageCot.insertAdjacentHTML("beforeend",paginationHTML(a))}function activateBtn(){let e=document.getElementsByClassName("page-btn")[0];e&&e.classList.add("active")}function changePage(e){document.getElementsByClassName("active")[0].classList.remove("active"),e.classList.add("active");showPage(data,parseInt(e.innerHTML))}function searchTest(e,t){let a=e.toLowerCase(),n=`${t.name.first} ${t.name.last}`.toLowerCase(),s=`${t.email}`.toLowerCase(),i=`${t.registered.date}`;return!!(n.includes(a)||s.includes(a))||!!i.includes(a)}function searchList(e,t){searchMatches=[],t.forEach(t=>{searchTest(e,t)&&searchMatches.push(t)})}function showSearch(e,t){addPagination(t),t.length>0?(showPage(t,1),activateBtn()):(listCot.innerHTML="",listCot.innerHTML=noResults(e.toUpperCase()))}searchCot.insertAdjacentHTML("beforeend",searchBar);let searchInput=document.getElementById("search");function appInit(){searchInput.value="",showPage(data,1),addPagination(data),activateBtn()}function paginationEvent(e){let t=e.target;Array.from(document.getElementsByClassName("page-btn")).includes(t)&&changePage(t)}appInit(),document.addEventListener("click",e=>{paginationEvent(e)}),document.addEventListener("keyup",e=>{"Enter"===e.key&&paginationEvent(e)});const searchBtn=document.getElementById("search-btn");function sendSearch(){let e=searchInput.value;searchList(e,data),showSearch(e,searchMatches)}searchInput.addEventListener("keyup",e=>{sendSearch()}),searchBtn.addEventListener("click",e=>{sendSearch()}),searchBtn.addEventListener("keyup",e=>{"Enter"===e.key&&sendSearch()});const clearBtn=document.getElementById("clear-btn");clearBtn.addEventListener("click",e=>{appInit()}),clearBtn.addEventListener("keyup",e=>{"Enter"===e.key&&appInit()});